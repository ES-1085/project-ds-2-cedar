

# Set up Data

```{r load-packages, warning = FALSE}
library(gtable)
library(ggridges)
library(htmltools)
library(knitr)
library(lubridate)
library(RColorBrewer)
library(tidymodels)
library(tidyverse)
```

```{r load-data}
ahrf_2019_2020 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2019_2020_maine.csv")
ahrf_2020_2021 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2020_2021_maine.csv")
ahrf_2021_2022 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2021_2022_maine.csv")
ahrf_2022_2023 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2022_2023_maine.csv")
ahrf_2019_2023 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2019_2023.csv")
```


```{r data-subsets-hpsa-and-county}
hpsa_areas <- ahrf_2019_2023 %>% 
  select(year, county_name, hpsa_prim_care_23, hpsa_prim_care_22, hpsa_prim_care_21, hpsa_prim_care_20, hpsa_prim_care_19, hpsa_prim_care_18, hpsa_prim_care_17, hpsa_prim_care_16, hpsa_prim_care_15, hpsa_prim_care_10, hpsa_dent_23,hpsa_dent_22, hpsa_dent_21, hpsa_dent_20, hpsa_dent_19, hpsa_dent_18, hpsa_dent_17, hpsa_dent_16, hpsa_dent_15, hpsa_dent_10, hpsa_mentl_hlth_23, hpsa_mentl_hlth_22, hpsa_mentl_hlth_21, hpsa_mentl_hlth_20, hpsa_mentl_hlth_19, hpsa_mentl_hlth_18, hpsa_mentl_hlth_17, hpsa_mentl_hlth_16, hpsa_mentl_hlth_15, hpsa_mentl_hlth_10)

hpsa_primary_care <- ahrf_2019_2023 %>% 
  select(year, county_name, hpsa_prim_care_23, hpsa_prim_care_22, hpsa_prim_care_21, hpsa_prim_care_20, hpsa_prim_care_19, hpsa_prim_care_18, hpsa_prim_care_17, hpsa_prim_care_16, hpsa_prim_care_15, hpsa_prim_care_10)

hpsa_dental_care <- ahrf_2019_2023 %>% 
  select(year, county_name, hpsa_dent_23,hpsa_dent_22, hpsa_dent_21, hpsa_dent_20, hpsa_dent_19, hpsa_dent_18, hpsa_dent_17, hpsa_dent_16, hpsa_dent_15, hpsa_dent_10)

hpsa_mh_care <- ahrf_2019_2023 %>% 
  select(year, county_name, hpsa_mentl_hlth_23, hpsa_mentl_hlth_22, hpsa_mentl_hlth_21, hpsa_mentl_hlth_20, hpsa_mentl_hlth_19, hpsa_mentl_hlth_18, hpsa_mentl_hlth_17, hpsa_mentl_hlth_16, hpsa_mentl_hlth_15, hpsa_mentl_hlth_10)

androscoggin <- ahrf_2019_2023 %>% 
  filter(county_name == "Androscoggin")

aroostook <- ahrf_2019_2023 %>% 
  filter(county_name == "Aroostook")

cumberland <- ahrf_2019_2023 %>% 
  filter(county_name == "Cumberland")

franklin <- ahrf_2019_2023 %>% 
  filter(county_name == "Franklin")

hancock <- ahrf_2019_2023 %>% 
  filter(county_name == "Hancock")

kennebec <- ahrf_2019_2023 %>% 
  filter(county_name == "Kennebec")

knox <- ahrf_2019_2023 %>% 
  filter(county_name == "Knox")

lincoln <- ahrf_2019_2023 %>% 
  filter(county_name == "Lincoln")

oxford <- ahrf_2019_2023 %>% 
  filter(county_name == "Oxford")

penobscot <- ahrf_2019_2023 %>% 
  filter(county_name == "Penobscot")

piscataquis <- ahrf_2019_2023 %>% 
  filter(county_name == "Piscataquis")

sagadahoc <- ahrf_2019_2023 %>% 
  filter(county_name == "Sagadahoc")

somerset  <- ahrf_2019_2023 %>% 
  filter(county_name == "Somerset")

waldo <- ahrf_2019_2023 %>% 
  filter(county_name == "Waldo")

washington <- ahrf_2019_2023 %>% 
  filter(county_name == "Washington")

york <- ahrf_2019_2023 %>% 
  filter(county_name == "York")
```

```{r hpsa-areas-data-clean-up}
hpsa_pc <- hpsa_primary_care %>%
  select(-year) %>%
  pivot_longer(starts_with("hpsa_prim_care"), names_to = "data_year", values_to = "hpsa_pc_score", names_prefix = "hpsa_prim_care_") %>% 
  mutate(data_year = as.numeric(data_year) + 2000) %>% 
  drop_na(hpsa_pc_score) %>% 
  distinct(county_name, data_year, .keep_all = TRUE)

hpsa_dental <- hpsa_dental_care %>% 
  select(-year) %>% 
  pivot_longer(starts_with("hpsa_dent_"), names_to = "data_year", values_to = "hpsa_dental_score", names_prefix = "hpsa_dent_") %>% 
  mutate(data_year = as.numeric(data_year) + 2000) %>% 
  drop_na(hpsa_dental_score) %>% 
  distinct(county_name, data_year, .keep_all = TRUE)

hpsa_mh <- hpsa_mh_care %>% 
  select(-year) %>% 
  pivot_longer(starts_with("hpsa_mentl_hlth"), names_to = "data_year", values_to = "hpsa_mh_score", names_prefix = "hpsa_mentl_hlth_") %>% 
  mutate(data_year = as.numeric(data_year) + 2000) %>% 
  drop_na(hpsa_mh_score) %>% 
  distinct(county_name, data_year, .keep_all = TRUE)
```

```{r maine-population}
maine_pop <- ahrf_2022_2023 %>% 
  select(cnty_name, cens_popn_20, cens_popn_10)
```

```{r hpsa-and-pop}
hpsa_pc_pop <- hpsa_pc %>% 
  full_join(maine_pop, join_by(county_name == cnty_name))

hpsa_dental_pop <- hpsa_dental %>% 
   full_join(maine_pop, join_by(county_name == cnty_name))

hpsa_mh_pop <- hpsa_mh %>% 
   full_join(maine_pop, join_by(county_name == cnty_name))
```


# Initial Exploration

```{r}
hpsa_pc %>% 
  ggplot(aes(x = data_year, y = hpsa_pc_score)) +
  geom_line(color = "#00C377") +
  facet_wrap(~ county_name)
```


# Analysis

# Conclusion
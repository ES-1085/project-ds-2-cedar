

# Load Packages & Data

```{r load-packages, warning = FALSE, echo = FALSE, message = FALSE}
library(gtable)
library(ggridges)
library(htmltools)
library(knitr)
library(leaflet)
library(lubridate)
library(RColorBrewer)
library(tidymodels)
library(tidyverse)
```

```{r load-data}
ahrf_2019_2020 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2019_2020_maine.csv")
ahrf_2020_2021 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2020_2021_maine.csv")
ahrf_2021_2022 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2021_2022_maine.csv")
ahrf_2022_2023 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2022_2023_maine.csv")
ahrf_2019_2023 <- read.csv("~/Desktop/GitHub/data_science_2/data/ahrf_2019_2023.csv")
```


# Initial Exploration

```{r hpsa-score-change}
hpsa_pc %>% 
  ggplot(aes(x = data_year, y = hpsa_pc_score)) +
  geom_line(color = "#00C377") +
  facet_wrap(~ county_name)

hpsa_dental %>% 
  ggplot(aes(x = data_year, y = hpsa_dental_score)) +
  geom_line(color = "#00C377") +
  facet_wrap(~ county_name)

hpsa_mh %>% 
  ggplot(aes(x = data_year, y = hpsa_mh_score)) +
  geom_line(color = "#00C377") + 
  facet_wrap(~ county_name)
```

```{r BROKEN-CODE-JAIL-pop-change}
# maine_pop <- maine_pop %>%
#   mutate(pct_change = (cens_popn_20/lag(cens_popn_10) - 1) * 100)
# 
# maine_pop

# why didn't this calculate a percent change for androscoggin county?
# code from: "https://stackoverflow.com/questions/48196552/calculate-percentage-change-in-r-using-dplyr"
```

```{r primary-care-provider-counts}
hpsa_pc_provider_counts %>% 
  ggplot() +
  geom_col(aes(x = count_year, y = pc_physician_count), fill = "#00608E") +
  geom_col(aes(x = count_year, y = md_pc_count), fill = "#00AF8C") +
  geom_col(aes(x = count_year, y = do_pc_count), fill = "#FDE333") +
  facet_wrap(~ county_name)

hpsa_pc_provider_counts %>% 
  ggplot() +
  geom_col(aes(x = count_year, y = pc_physician_count/cens_popn_20), fill = "#00608E") +
  geom_col(aes(x = count_year, y = md_pc_count/cens_popn_20), fill = "#00AF8C") +
  geom_col(aes(x = count_year, y = do_pc_count/cens_popn_20), fill = "#FDE333") +
  facet_wrap(~ county_name)

hpsa_pc_provider_counts %>% 
  ggplot() +
  geom_line(aes(x = count_year, y = pc_physician_count)) +
  geom_line(aes(x = count_year, y = md_pc_count)) +
  geom_line(aes(x = count_year, y = do_pc_count)) +
  facet_wrap(~ county_name)

hpsa_pc_provider_counts %>% 
  ggplot() +
  geom_line(aes(x = count_year, y = pc_physician_count/cens_popn_20)) +
  geom_line(aes(x = count_year, y = md_pc_count/cens_popn_20)) +
  geom_line(aes(x = count_year, y = do_pc_count/cens_popn_20)) +
  facet_wrap(~ county_name)
```

```{r active-md-count-by-year}
md_active %>% 
  ggplot(aes(x = active_md_data_year, y = active_md_count, fill = active_md_data_year)) +
  geom_col() +
  facet_wrap(~ county_name) +
  scale_fill_viridis_c()
```

```{r}
hospitals %>% 
  select(cnty_name, hosp_20, hosp_21) %>% 
  arrange(cnty_name)

hospital_admissions %>% 
  select(cnty_name, hosp_adm_20, hosp_adm_21) %>% 
  arrange(cnty_name)
```

```{r}

```


# Analysis

```{r provider-change-model}

```

```{r }

```
